<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Protech</title>
    <link rel="icon" href="/resources/imgs/logo-white.ico">
    <link rel="stylesheet" href="/resources/css/styles.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"
            defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>
<body class="users">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="nav-cont">
        <a href="/" class="navbar-brand">
            <img src="resources/imgs/Protech-logo-white.png" alt="Protech">
        </a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <a href="/" class="nav-link">Inicio</a>
            </li>
            <li class="nav-item">
                <a href="/" class="nav-link">Estadísticas</a>
            </li>
            <li class="nav-item">
                <a href="/" class="nav-link">Productos</a>
            </li>
            <li class="nav-item">
                <a href="aboutUs" class="nav-link">Acerca de</a>
            </li>
        </ul>
        <a href="logout" class="btn btn-danger logout">Cerrar sesión</a>
    </div>
</nav>
<div class="contenedor1">
    <div class="ProdTitle">
        <div>
            <h1>Usuarios</h1>
        </div>
        <div class="btnAggProduct">
            <button>
                <a href="/register">Añadir usuario</a>
            </button>
        </div>
    </div>
    <table class="table table-dark table-hover">
        <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Cargo</th>
            <th>Usuario</th>
            <th></th>
        </tr>
        <% for (let i = 0; i < users.length; i++) { %>
            <tr>
                <td><%= users[i].usuarioId %></td>
                <td><%= users[i].nombre_empleado %></td>
                <td><%= users[i].cargo %></td>
                <td><%= users[i].usuario %></td>
                <td>
                    <a href="/deleteUser/<%= users[i].usuarioId %>" class="btn btn-danger">
                        <i class="far fa-trash-alt"></i>
                    </a>
                    <a href="/editUser/<%= users[i].usuarioId %>" class="btn btn-primary" data-bs-toggle="modal"
                       data-bs-target="#editUser<%= users[i].usuarioId %>">
                        <i class="fas fa-user-edit"></i>
                    </a>
                </td>
            </tr>
        <div class="modal fade" id="editUser<%= users[i].usuarioId %>" tabindex="-1" aria-labelledby="exampleModalLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="row justify-content-center ">
                            <div class="col-12">
                                <div class="card shadow">
                                    <div class="card-body">
                                        <div class="card-title text-center border-bottom">
                                            <h2>Editar usuario</h2>
                                        </div>
                                        <form action="/editUser/<%= users[i].usuarioId %>" method="POST">
                                            <div class="mb-4">
                                                <label for="empNameUpd">Nombre de Empleado</label>
                                                <input type="text" class="form-control" name="empNameUpd"
                                                       value="<%= users[i].nombre_empleado %>">
                                            </div>
                                            <div class="mb-4">
                                                <label for="empRolUpd">Cargo</label>
                                                <select name="empRolUpd" class="form-select">
                                                    <% if(users[i].cargo === "TECNICO") {%>
                                                        <option value="TECNICO" selected>Técnico</option>
                                                        <option value="ADMINISTRATIVO">Administrativo</option>
                                                    <%}else{%>
                                                        <option value="TECNICO">Técnico</option>
                                                        <option value="ADMINISTRATIVO" selected>Administrativo</option>
                                                    <%}%>
                                                </select>
                                            </div>
                                            <div class="mb-4">
                                                <label for="userNameUpd">Nombre de Usuario</label>
                                                <input type="text" class="form-control" name="userNameUpd" value="<%= users[i].usuario %>">
                                            </div>
                                            <div class="d-grid">
                                                <button type="submit" class="btn btn-success">Actualizar</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
            <% } %>
    </table>
</div>

<!-- Modal -->


</body>
</html>



